
오늘은 2024 당근 테크 서버 부문 참여 후기를 전하려고 합니다.
세션은 Frontend / Server / Data,ML / Platform 이 있었고, Data 와 Platform 에 관심이 있었으나 현재 Server에 가장 많은 관심을 가지고 있어, 다른 발표를 듣지 못하였지만 추후 Youtube 링크로 공유 해 준다고 하셔서 시간 날 때 챙겨 보기로 했습니다. 

발표는 총 7개이며, 세션당 2~30분 정도의 분량으로 진행하였고 중간에 10분 정도의 휴식과 
4번째 발표 후 30분 정도의 대휴식이 있었습니다. 
## 1. 당근알바 초기 엔지니어링 전략_빠르게,빠르게,더 빠르게
presenter : 박용진 Mark (당근알바팀 서버개발)
### 내용 정리
- 가장 중요한 것에 집중하기  **제품의 생산성**
	- 가설 -> 실험 -> 검증 을 통한 빠른 의사결정 (비용 최소화)
	- 결과 시각화 (Amplitude, Mixpannel 등)
- 필요한 것만 구현하기 **목적**
	- 문제에 대한 해결 방법 제시
	- 실험 . 필요한 만큼만 구현. 결과에 따라 추가 구현
- 효율적 에러 대응 **현재 작업에 집중**
	- 에러 발생 시, 모니터링을 통한 영향도 확인 (Sentry, Grafana, Datadog, Apollo Studio 등 모니터링 툴 활용)
	- 영향도에 따른 후순위 대응 (컨텍스트 전환 최소화)
- 클라이언트와 효율적 **협업**
	- 응답의 데이터 구조를 유연하게 가져가는 것 (Ask for what you need, get exactly that)
	- GraphQL 적용 (엔지니어링 논의 비용 감소)
### 내 생각
사이드 프로젝트를 하며, 함께 했던 분들과 기획 단계부터 여러가지 고민을 많이 하였었고, 진행 단계에서 의견이 조율되지 않아 비용을 많이 사용해왔었는데, 초기 엔지니어링 시 무엇보다 우선되어야 하는 것은 제품을 생산하는 것이라고 생각 되어지는 발표였다.
## 2. 우리 동네 어디까지 좁아지는 거예요_자연 경계로 좁혀보는 우리 동네
presenter : 손진 Geo (GIS , Location Intelligence)
### 내용 정리
- 장소의 범주화 (우리동네에 대한 정의가 무엇일까?)
- 장소의 범위 설정
- S2, H3 도입 시 문제점
	- 사람들이 인식하는 경계, 컨텍스트를 포함시키기 힘들다.
	- Border problem 발생
	- 정확한 영역에 대한 더 많은 메모리 비용 발생
- 경계 기준 설정
	- 일정 거리 이내의 빌딩을 hot spot의 형태로 클러스터링
	- 기존 행정경계 + 토지이용지도 데이터를 overlay
	- 기존 행정경계 + 자연경계 (수계, 도로, 산지, 공원)로 구분
- 우리동네 좁혀보기
	- Voronoi Diagram 을 통한 면 -> 점 -> 면 빈틈 채우기
	- 기존 읍/면/동 보다 훨씬 사용자의 활동반경을 잘 반영하는 형태로 가공
### 내 생각
단순 히 Map Api를 통해 장소 인식을 하여 나누면 되지 않을까 라는 생각이었는데, 단순 보도거리 보다는 공간적 맥락을 포함하여 일관적인 영역으로 관리하여, 사용자의 활동반경을 잘 반영하는 형태로 데이터 조회/분석 하여, 진정한 **하이퍼로컬** 플랫폼으로 작동하며. 임팩트 있는 의사결정을 하도록 인사이트를 제공하는 점에서 큰 감명을 받았습니다.

## 3. 당근 채팅 시스템은 어떻게 만들까
presenter : 권영훈 Andrew.kwon (채팅 서버 개발) , 김기현 Ash  (채팅 서버 개발)
### 내용 정리
- 특징
	- 3900만 대규모 서비스
	- 중고거래, 모임, 알바 등 다양한 채팅 환경
	- 사장님들도 당근 채팅의 웹,모바일 채팅으로 비즈니스
	- 서버에 영구 저장되는 대화 기록
- 히스토리
	- 기존 RDB 사용, SQL 쿼리 튜닝
	- 캐시 추가
	- 서버 Scale Up
- 데이타 불균형에 따른 대량 DB 분리, 설계 (채팅 DB)
	- 샤딩 (엑세스 패턴에 맞는 Shard Key)
	- 메시지,공지사항 : chat_id , 유저정보, 유저의 채팅방 : user_id
- 샤딩 방식
	- Range Sharding : 범위 기반으로 데이터 분산 
	- Lookup Table Sharding : ID와 샤드를 매핑하는 룩업 테이블 사용 
	- Hash Sharding : hash(ID) % 샤드 개수로 분산 
	- Consistent Hashing : 노드 추가/삭제 시 리밸런싱이 용이
- 채택한 DB : DynamoDB
	- 자동 파티셔닝 및 데이터 분산
	- 오토 스케일링
	- 완전 관리형 서비스
	- 유연한 데이터 모델링 (NoSQL)
- 채팅 실시간 API 최적화
	- 최신 메시지 순 채팅방 정렬 - 멀티스레드 (고루틴)
	- 여러 리소스 - 고루틴
	- 메시지 읽음 - 비동기 처리, 이벤트 큐
- 못다한 이야기
	- 채팅 데이터베이스 설계 
		- CQRS 패턴 설계
		- Cache 저장소 패턴
		- TTL 전략 
	- 채팅 API 최적화
		- Bulk 업데이트와 pipeline 처리
		- Replication Lag과 일관성 유지
		- Rate limiting, fallback 처리
### 내생각
초기 RDB 에서 분리하는 작업. 목적에 따른 설계/구현 과정이 인상적이었습니다. 최근 Redis 를 공부하고 있는데, **샤딩**에 대해 한칸 더 다가간 느낌이었습니다. 이전 채팅 시스템 구현 시 어떤 식으로 풀어 나갈지에 대한 고민이 많았었는데 많이 도움이 되었습니다. 못다한 이야기에 대해서도 기회가 있다면 꼭 듣고싶습니다.
## 4. 멈춰버린 세계_네트워크 통신 불가를 해결하기 위한 여정(feat. Istio)
presenter : 정명길 Heshy (당근 페이, SRE) , 김성중 jeremy.kim (당근 페이, 머니서비스) 
### 내용 정리

### 내 생각


## 5. 지역 기반으로 중고거래 검색을 샤딩하라
presenter : 임문규 Johnny (검색플랫폼)

## 6. 빠르게 변하는 운영 도메인에서 살아남는 코드 만들기
presenter : 윤준혁 Julius (운영개발팀)

## 7. 당근의 회원 시스템을 마이크로 서비스로 분리하기
presenter : 김기혁 Key (Identity Service , 회원/인증 서비스)


## 후기
- 입장 안내 도와주시는 분들이 친절하셔서 찾아가는 것은 어렵지 않았습니다.
- 중간 중간 퀴즈타임을 넣어주셔서 몰입하게 되어 재밌었습니다. (선착순 15명 댓글)
- 프레젠테이션 자료를 모두 공유해 주셔서 넘어간 자료도 다시 보기 편해 좋았습니다.
- 말하고 싶은 내용이 많으셨을 것 같은데 30분 안에 많은 내용을 압축하려고 고생하셨을 것 같다는 생각에 박수를 많이 쳤습니다.
- 평소에 생각했던 고민에 대해서 실무적으로 경험해 보시고 공유해주셨던 것들이 도움이 많이 되었습니다.
- **당근** 에서는 **사용자의 데이터**에 가치를 두고 개발해 나가는 것이 인상적이었습니다. (우선순위 결정 시)
- 네트워킹 하는 자리에서 질문할 내용을 미리 생각해 두고 참여 하었으면 하는 생각에 아쉬웠습니다.
- 사은품으로 에코벡을 받아서 좋았습니다.

[2024 당근 테크 밋업 가이드](https://daangn.notion.site/2024-2f42802561d14f2bbdf0ef18a2786732)